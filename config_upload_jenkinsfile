pipeline {
    agent any

    environment {
        EMS_URL = "https://172.27.28.165.nip.io/ems/login"
        EMS_USER = "root"
        EMS_PASS = "root123"
        CONFIG_ZIP = "/var/lib/jenkins/downloads/merged_config.zip"
    }

    stages {
        stage('Unzip Config Files') {
            steps {
                sh 'rm -rf config_files && mkdir config_files'
                sh "unzip -o ${CONFIG_ZIP} -d config_files"
            }
        }

        stage('Run GUI Automation') {
            steps {
                sh 'pip install selenium'
                sh 'python3 scripts/gui_upload.py'
            }
        }
    }
}
